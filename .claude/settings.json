{
  "permissions": {
    "allow": [
      "Bash(pnpm add:*)",
      "Bash(mkdir:*)",
      "Bash(pnpm lint:*)",
      "Bash(pnpm dlx:*)",
      "mcp__supabase__list_projects",
      "mcp__supabase__execute_sql",
      "mcp__supabase__list_tables",
      "mcp__supabase__apply_migration",
      "Bash(pnpm build:*)",
      "Skill(mgrep)",
      "Bash(mgrep:*)",
      "WebSearch",
      "Bash(pnpm test:*)",
      "Bash(pnpm test:coverage:*)",
      "Bash(pnpm test:e2e:*)",
      "Bash(pnpm exec playwright install:*)",
      "Bash(lsof:*)",
      "Bash(CI=true pnpm test:e2e:*)",
      "Bash(npx tsc:*)",
      "Bash(pnpm tsc:*)",
      "mcp__context7__resolve-library-id",
      "mcp__context7__query-docs",
      "Bash(curl:*)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(git push:*)",
      "Bash(gh pr create:*)",
      "Bash(brew install:*)",
      "Bash(gh auth login:*)",
      "Bash(git checkout:*)",
      "Bash(pnpm prettier:*)",
      "Bash(claude doctor:*)",
      "Bash(pnpm format:*)"
    ],
    "deny": [
      "Read(./.env)",
      "Read(./.env.*)",
      "Read(./secrets/**)",
      "Read(./config/credentials.json)",
      "Read(./build)"
    ]
  },
  "enableAllProjectMcpServers": true,
  "enabledMcpjsonServers": [],
  "hooks": {
    "SessionStart": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "node -e \"let d='';process.stdin.on('data',c=>d+=c);process.stdin.on('end',()=>{const fs=require('fs');const i=JSON.parse(d);const sid=(i.session_id||'unknown').slice(0,8);const ts=new Date().toTimeString().slice(0,8);const dt=new Date().toLocaleDateString();const hdr='\\n════════════════════════════════════════\\n'+dt+' '+ts+' [SessionStart] '+sid+'\\n════════════════════════════════════════\\n';fs.appendFileSync('./.claude/logs/hooks.log',hdr);fs.appendFileSync('./.claude/logs/sessions/'+sid+'.log',hdr);console.log(JSON.stringify({systemMessage:'[Hook] Session started: '+sid}))})\""
          }
        ]
      },
      {
        "hooks": [
          {
            "type": "command",
            "command": "node ./scripts/hooks/session-start/index.js"
          }
        ]
      }
    ],
    "UserPromptSubmit": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "node -e \"let d='';process.stdin.on('data',c=>d+=c);process.stdin.on('end',()=>{const fs=require('fs');const i=JSON.parse(d);const sid=(i.session_id||'unknown').slice(0,8);const f='./.claude/logs/userprompt-debug.json';let arr=[];try{arr=JSON.parse(fs.readFileSync(f,'utf8'))}catch(e){}arr.unshift({...i,logged_at:new Date().toISOString()});if(arr.length>50)arr=arr.slice(0,50);fs.writeFileSync(f,JSON.stringify(arr,null,2));const p=(i.prompt||'').slice(0,50).replace(/\\n/g,' ');const ts=new Date().toTimeString().slice(0,8);const line='\\n────────────────────────────────────────\\n'+ts+' [UserPrompt] '+p+(i.prompt?.length>50?'...':'')+'\\n';fs.appendFileSync('./.claude/logs/hooks.log',line);fs.appendFileSync('./.claude/logs/sessions/'+sid+'.log',line);console.log(JSON.stringify({systemMessage:'[Hook] Prompt: '+p+(i.prompt?.length>50?'...':'')}))})\""
          }
        ]
      }
    ],
    "PreToolUse": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "node -e \"let d='';process.stdin.on('data',c=>d+=c);process.stdin.on('end',()=>{const fs=require('fs');const i=JSON.parse(d);const sid=(i.session_id||'unknown').slice(0,8);const t=i.tool_name||'unknown';const ts=new Date().toTimeString().slice(0,8);const inp=i.tool_input||{};let desc='';if(t==='Bash'){const cmd=(inp.command||'').slice(0,50);desc=cmd+(inp.command?.length>50?'...':'')}else if(t==='Read'||t==='Write'||t==='Edit'){desc=require('path').basename(inp.file_path||'')}else if(t==='Glob'){desc=inp.pattern||''}else if(t==='Grep'){desc=inp.pattern||''}const line=ts+' [PreToolUse:'+t+'] '+(desc||'exec')+' \\n';fs.appendFileSync('./.claude/logs/hooks.log',line);fs.appendFileSync('./.claude/logs/sessions/'+sid+'.log',line);console.log(JSON.stringify({systemMessage:'[Hook] '+t+': '+(desc||'exec')}))})\""
          }
        ]
      },
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "node ./scripts/hooks/pre-tool-use/block-dev-server.js"
          }
        ]
      },
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "node ./scripts/hooks/pre-tool-use/tmux-reminder.js"
          }
        ]
      },
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "node -e \"let d='';process.stdin.on('data',c=>d+=c);process.stdin.on('end',()=>{const i=JSON.parse(d);const cmd=i.tool_input?.command||'';if(cmd.includes('git push')){const fs=require('fs');const ts=new Date().toTimeString().slice(0,8);fs.appendFileSync('./.claude/logs/hooks.log',ts+' [PreToolUse:Bash] git-push - 푸시 전 변경사항 리뷰 필요\\n');console.log(JSON.stringify({systemMessage:'[Hook] git push - 푸시 전 변경사항 리뷰 필요'}))}})\""
          }
        ]
      },
      {
        "matcher": "Write",
        "hooks": [
          {
            "type": "command",
            "command": "node -e \"let d='';process.stdin.on('data',c=>d+=c);process.stdin.on('end',()=>{const i=JSON.parse(d);const p=i.tool_input?.file_path||'';if(/\\.(md|txt)$/.test(p)){const fn=require('path').basename(p);const ts=new Date().toTimeString().slice(0,8);require('fs').appendFileSync('./.claude/logs/hooks.log',ts+' [PreToolUse:Write] doc-create - '+fn+' 권한 확인 필요\\n');console.log(JSON.stringify({systemMessage:'[Hook] Creating '+fn+' - Did you ask user permission?'}))}})\""
          }
        ]
      },
      {
        "matcher": "Edit|Write",
        "hooks": [
          {
            "type": "command",
            "command": "node \"./scripts/hooks/pre-tool-use/suggest-compact.js\""
          }
        ]
      }
    ],
    "PreCompact": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "node -e \"let d='';process.stdin.on('data',c=>d+=c);process.stdin.on('end',()=>{const i=JSON.parse(d);const typ=i.type||'unknown';const ts=new Date().toTimeString().slice(0,8);require('fs').appendFileSync('./.claude/logs/hooks.log',ts+' [PreCompact:'+typ+'] 컴팩션 시작\\n');console.log('[Hook] Compaction starting ('+typ+')')})\""
          }
        ]
      },
      {
        "matcher": "manual",
        "hooks": [
          {
            "type": "command",
            "command": "node ./scripts/hooks/pre-compact/index.js"
          }
        ]
      },
      {
        "matcher": "auto",
        "hooks": [
          {
            "type": "command",
            "command": "node ./scripts/hooks/pre-compact/index.js"
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "node -e \"let d='';process.stdin.on('data',c=>d+=c);process.stdin.on('end',()=>{const fs=require('fs');const i=JSON.parse(d);const sid=(i.session_id||'unknown').slice(0,8);const t=i.tool_name||'unknown';const ts=new Date().toTimeString().slice(0,8);const inp=i.tool_input||{};let desc='';if(t==='Bash'){const cmd=(inp.command||'').slice(0,50);desc=cmd+(inp.command?.length>50?'...':'')}else if(t==='Read'||t==='Write'||t==='Edit'){desc=require('path').basename(inp.file_path||'')}else if(t==='Glob'){desc=inp.pattern||''}else if(t==='Grep'){desc=inp.pattern||''}const line=ts+' [PostToolUse:'+t+'] '+(desc||'done')+' \\n';fs.appendFileSync('./.claude/logs/hooks.log',line);fs.appendFileSync('./.claude/logs/sessions/'+sid+'.log',line);console.log(JSON.stringify({systemMessage:'[Hook] ✓ '+t+': '+(desc||'done')}))})\""
          }
        ]
      },
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "node -e \"let d='';process.stdin.on('data',c=>d+=c);process.stdin.on('end',()=>{const r=JSON.parse(d);const o=r.tool_result||r.tool_output||'';const m=o.match(/https:\\/\\/github\\.com\\/[^\\s]+\\/pull\\/\\d+/);if(m){const ts=new Date().toTimeString().slice(0,8);require('fs').appendFileSync('./.claude/logs/hooks.log',ts+' [PostToolUse:Bash] pr-create - '+m[0]+'\\n');console.log(JSON.stringify({systemMessage:'[Hook] PR created: '+m[0]}))}})\""
          }
        ]
      },
      {
        "matcher": "Edit",
        "hooks": [
          {
            "type": "command",
            "command": "node -e \"let d='';process.stdin.on('data',c=>d+=c);process.stdin.on('end',()=>{const i=JSON.parse(d);const p=i.tool_input?.file_path;if(p&&/\\.(ts|tsx|js|jsx)$/.test(p)){const{execSync}=require('child_process');const fn=require('path').basename(p);const ts=new Date().toTimeString().slice(0,8);try{execSync('pnpm prettier --write '+p,{stdio:'pipe'});require('fs').appendFileSync('./.claude/logs/hooks.log',ts+' [PostToolUse:Edit] prettier - '+fn+' 포맷 완료\\n');console.log(JSON.stringify({systemMessage:'[Hook] Prettier: '+fn+' formatted'}))}catch(e){require('fs').appendFileSync('./.claude/logs/hooks.log',ts+' [PostToolUse:Edit] prettier - '+fn+' 포맷 실패\\n');console.log(JSON.stringify({systemMessage:'[Hook] Prettier failed: '+fn}))}}})\""
          }
        ]
      },
      {
        "matcher": "Edit",
        "hooks": [
          {
            "type": "command",
            "command": "node -e \"let d='';process.stdin.on('data',c=>d+=c);process.stdin.on('end',()=>{const i=JSON.parse(d);const p=i.tool_input?.file_path;if(p&&/\\.(ts|tsx)$/.test(p)){const{execSync}=require('child_process');const fn=require('path').basename(p);const ts=new Date().toTimeString().slice(0,8);try{execSync('pnpm tsc --noEmit 2>&1',{encoding:'utf8'});require('fs').appendFileSync('./.claude/logs/hooks.log',ts+' [PostToolUse:Edit] tsc - 에러 없음\\n')}catch(e){const msg=(e.stdout||e.message).slice(0,200).replace(/\\n/g,' ');require('fs').appendFileSync('./.claude/logs/hooks.log',ts+' [PostToolUse:Edit] tsc - '+msg+'\\n');console.log(JSON.stringify({systemMessage:'[Hook] TypeScript errors in '+fn}))}}})\""
          }
        ]
      },
      {
        "matcher": "Edit",
        "hooks": [
          {
            "type": "command",
            "command": "node -e \"let d='';process.stdin.on('data',c=>d+=c);process.stdin.on('end',()=>{const i=JSON.parse(d);const p=i.tool_input?.file_path;if(p&&/\\.(ts|tsx|js|jsx)$/.test(p)){const fs=require('fs');const fn=require('path').basename(p);const ts=new Date().toTimeString().slice(0,8);try{const c=fs.readFileSync(p,'utf8');if(c.includes('console.log')){fs.appendFileSync('./.claude/logs/hooks.log',ts+' [PostToolUse:Edit] console-warn - ⚠️ '+fn+'에 console.log 발견\\n');console.log(JSON.stringify({systemMessage:'[Hook] ⚠️ console.log detected in '+fn+' - Remember to remove before commit'}))}}catch(e){}}})\""
          }
        ]
      }
    ],
    "Stop": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "node -e \"const{execSync}=require('child_process');const fs=require('fs');let d='';process.stdin.on('data',c=>d+=c);process.stdin.on('end',()=>{try{execSync('git rev-parse --git-dir',{stdio:'pipe'})}catch{process.exit(0)}try{const files=execSync('git diff --name-only HEAD',{encoding:'utf8',stdio:['pipe','pipe','pipe']}).split('\\n').filter(f=>/\\.(ts|tsx|js|jsx)$/.test(f)&&fs.existsSync(f));let found=[];for(const f of files){if(fs.readFileSync(f,'utf8').includes('console.log'))found.push(require('path').basename(f))}if(found.length>0){console.log(JSON.stringify({systemMessage:'[Hook] ⚠️ console.log found in: '+found.join(', ')+' - Remove before commit'}))}}catch(e){}})\""
          }
        ]
      }
    ],
    "SessionEnd": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "node ./scripts/hooks/session-end/persist-state.js"
          }
        ]
      },
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "node ./scripts/hooks/session-end/evaluate-session.js"
          }
        ]
      }
    ]
  },
  "statusLine": {
    "type": "command",
    "command": "echo \"\\033[35m$(whoami):\\033[36m$(basename $PWD) \\033[32mctx:65% \\033[37mOpus 4.5 \\033[33m$(date +%H:%M)\\033[0m\""
  },
  "enabledPlugins": {
    "explanatory-output-style@claude-plugins-official": true
  }
}
